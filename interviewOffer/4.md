## 剑指Offer之面试题4：替换空格

### 1 C/C++中的字符串

***

这部分讲到了字符串的两个特性：
* 字符串以'\0'结尾(这是C风格字符串)；
* 使用字符串时，定义char[]和char*的意义是不同的：用char[]定义字符串时，与中间有大小一样，会用栈空间来容纳字符；用char*定义字符串时，字符串的内容是存放在一个单独的空间(该字符串存储于代码段部分)中，char *str = "hello world";只开辟了一个栈空间容纳指针，如果两个字符串的内容相同，就只有一份拷贝。

### 2 替换空格

***

> 实现一个函数，把字符串中的每个空格替换成"%20"。例如，输入"We are happy."，则输出"We%20are%20happy"。

### 2.1 深刻理解题义

***

这其实是个替换字符的题，如果要替换的字符的长度和原来一样，就可以直接替换，如果长度不一样，就要考虑覆盖的问题。这里，它将字符串中的空格替换成3个特殊字符。因此，必须考虑覆盖。当然，如果是在新建的字符串中执行这个操作，就不用考虑覆盖的问题。因此，在真正面试时，要学会和面试官进行沟通，理解面试题的要求。

想法1：从前往后遍历，发现一个空格，就将这个空格后面的字符向后移动2个字符，知道遍历全部的字符。
优点：容易想到，思路简单。
缺点：可以知道，这种方法的时间复杂度是O(n)。

想法2：先从前往后遍历一次，找出整个字符串中空格的个数，设字符串原长度是s，字符串中空格的个数是n，那么，替换后的长度是s+2*n。因此，从后往前遍历，设当前遍历的字符索引是i，如果当前字符不是空格，就将该字符放到i+2*n(其中n是这个字符前面的空格个数)；如果当前字符是空格，就将i+2*n,i+2*n-1,i+2*n-2分别改为'0'，'2'，'%'。

### 2.2 实现

***

``` C++
void replace_blank(char str[], int len)
{
	if(str == NULL || len <= 0) {
		return;
	}

	int i = 0, cnt = 0, size = 0; // cnt为整个字符串的空格个数，size为字符串字符个数
	while(str[i] != '\0') {
		if(str[i] == ' ') {
			++cnt;
		}
		++size;
		++i;
	}

	if(size+2*cnt > len) { // size+2*n为替换空格之后的字符串长度
		return;
	}

	for(i = size-1; i >= 0; --i) {
		if(str[i] != ' ') {
			str[i+2*cnt] = str[i];
		}
		else {
			str[i+2*cnt] = '0';
			str[i+2*cnt-1] = '2';
			str[i+2*cnt-2] = '%';
			--cnt;
		}
	}
}
```

在《剑指Offer》中使用了两个索引，分别遍历替换前和替换后的字符串，应该来讲，这种方法比较好想，而且代码也比较好看。

### 3 小结

***

从这个面试题可以学到的：
* 要学会和面试官沟通。在不理解题义时，要询问面试官，不能臆想。
* 预处理。对于许多问题，都可以先对数据进行预处理，然后再对数据进行操作。这里，先遍历字符串，获得字符串的长度和字符串中空格的个数，然后再从后往前遍历，就可以知道每个字符的最终存放位置。
* 逆向。通常，我们都喜欢从前往后，有时候，从后往前更加高效。
